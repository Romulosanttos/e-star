CREATE DATABASE TCC;
USE TCC;

CREATE TABLE IF NOT EXISTS CURSO(
ID_CURSO INT NOT NULL AUTO_INCREMENT,
CURSO VARCHAR (45) NOT NULL,
CONSTRAINT PK_CURSO PRIMARY KEY (ID_CURSO)
);

CREATE TABLE IF NOT EXISTS LINHA_PESQUISA(
ID_LINHA_PESQUISA INT NOT NULL AUTO_INCREMENT,
LINHA_PESQUISA VARCHAR (250) NOT NULL,
FK_CURSO INT,
CONSTRAINT PK_LINHA_PESQUISA PRIMARY KEY (ID_LINHA_PESQUISA),
CONSTRAINT CUSO_FK FOREIGN KEY (FK_CURSO) REFERENCES CURSO (ID_CURSO)
);
--
CREATE TABLE IF NOT EXISTS PROFESSOR(
ID_PROFESSOR INT NOT NULL AUTO_INCREMENT,
NOME VARCHAR (100) NOT NULL,
MATRICULA CHAR (9) NOT NULL,
EMAIL VARCHAR (50) NOT NULL,
LOGIN VARCHAR (50) NOT NULL,
SENHA VARCHAR (20) NOT NULL,
CONSTRAINT PK_PROFESSOR PRIMARY KEY (ID_PROFESSOR)
);
 
CREATE TABLE IF NOT EXISTS ALUNO(
ID_ALUNO INT NOT NULL AUTO_INCREMENT,
NOME VARCHAR (100) NOT NULL,
MATRICULA CHAR (9) NOT NULL,
EMAIL VARCHAR (50) NOT NULL,
LOGIN VARCHAR (50) NOT NULL,
SENHA VARCHAR (20) NOT NULL,
FK_CURSO INT,
CONSTRAINT PK_ALUNO PRIMARY KEY (ID_ALUNO),
CONSTRAINT CURSO_FK FOREIGN KEY (FK_CURSO) REFERENCES CURSO (ID_CURSO)
);

CREATE TABLE IF NOT EXISTS EVENTOS(
ID_EVENTOS INT NOT NULL AUTO_INCREMENT,
NOME VARCHAR (100) NOT NULL,
DATA_HORA DATETIME NOT NULL,
LOCAL_EVENTO VARCHAR (100) NOT NULL,
FK_PROFESSOR INT,
FK_CURSO INT,
CONSTRAINT PK_EVENTOS PRIMARY KEY (ID_EVENTOS),
CONSTRAINT PROFESSOR_FK FOREIGN KEY (FK_PROFESSOR) REFERENCES PROFESSOR (ID_PROFESSOR),
CONSTRAINT CURSO_FK2 FOREIGN KEY (FK_CURSO) REFERENCES CURSO (ID_CURSO)
);

CREATE TABLE IF NOT EXISTS AGENDAMENTO(
ID_AGENDAMENTO INT NOT NULL AUTO_INCREMENT,
MOTIVO VARCHAR (100) NOT NULL,
FK_PROFESSOR INT,
FK_ALUNO INT,
CONSTRAINT PK_AGENDAMENTO PRIMARY KEY (ID_AGENDAMENTO),
CONSTRAINT PROFESSOR_FK2 FOREIGN KEY (FK_PROFESSOR) REFERENCES PROFESSOR (ID_PROFESSOR),
CONSTRAINT ALUNO_FK FOREIGN KEY (FK_ALUNO) REFERENCES ALUNO (ID_ALUNO)
);

CREATE TABLE IF NOT EXISTS TCC(
ID_TCC INT NOT NULL AUTO_INCREMENT,
TITULO VARCHAR (100) NOT NULL,
DESCRIÇÃO VARCHAR (250) NOT NULL,
STATUS_TCC BOOLEAN,
OBJETIVOS VARCHAR (100) NOT NULL,
JUSTIFICATIVA VARCHAR (100),
TCC_TIPO BOOLEAN NOT NULL,
FK_LINHA_PESQUISA INT,
CONSTRAINT PK_TCC PRIMARY KEY (ID_TCC),
CONSTRAINT LINHA_PESQUISA_FK FOREIGN KEY (FK_LINHA_PESQUISA) REFERENCES LINHA_PESQUISA (ID_LINHA_PESQUISA)
);

CREATE TABLE IF NOT EXISTS COMPONENTES(
ID_COMPONENTES INT NOT NULL AUTO_INCREMENT,
FK_PROFESSOR INT,
FK_ALUNO1 INT,
FK_ALUNO2 INT,
FK_TCC INT,
CONSTRAINT PK_COMPONENTES PRIMARY KEY (ID_COMPONENTES),
CONSTRAINT PROFESSOR_FK3 FOREIGN KEY (FK_PROFESSOR) REFERENCES PROFESSOR (ID_PROFESSOR),
CONSTRAINT ALUNO1_FK FOREIGN KEY (FK_ALUNO1) REFERENCES ALUNO (ID_ALUNO),
CONSTRAINT ALUNO2_FK FOREIGN KEY (FK_ALUNO2) REFERENCES ALUNO (ID_ALUNO),
CONSTRAINT TCC_FK FOREIGN KEY (FK_TCC) REFERENCES TCC (ID_TCC)
);

CREATE TABLE IF NOT EXISTS RELATORIO(
ID_RELATORIO INT NOT NULL AUTO_INCREMENT,
APRESENTAÇÃO VARCHAR (250) NOT NULL,
FUNDAMENTAÇÃO VARCHAR (250) NOT NULL,
DESENVOLVIMENTO VARCHAR (250) NOT NULL,
MODELO_RESULTADO VARCHAR (250) NOT NULL,
NOTA_TOTAL CHAR (4),
TIPO_RELATORIO VARCHAR (50) NOT NULL,
APRESENTAÇÃO_COMENTARIO VARCHAR (250) NOT NULL,
FUNDAMENTAÇÃO_COMENTARIO VARCHAR (250) NOT NULL,
DESENVOLVIMENTO_COMENTARIO VARCHAR (250) NOT NULL,
MODELO_RESULTADO_COMENTARIO VARCHAR (250) NOT NULL,
FK_TCC INT,
CONSTRAINT PK_RELATORIO PRIMARY KEY (ID_RELATORIO),
CONSTRAINT TCC_FK2 FOREIGN KEY (FK_TCC) REFERENCES TCC (ID_TCC)
);

CREATE TABLE IF NOT EXISTS ATIVIDADES(
ID_ATIVIDADES INT NOT NULL AUTO_INCREMENT,
NOME VARCHAR (50) NOT NULL,
MES DATE NOT NULL,
DESCRIÇÃO VARCHAR (250) NOT NULL,
FK_TCC INT,
CONSTRAINT PK_ATIVIDADES PRIMARY KEY (ID_ATIVIDADES),
CONSTRAINT TCC_FK3 FOREIGN KEY (FK_TCC) REFERENCES TCC (ID_TCC)
);
 
CREATE TABLE IF NOT EXISTS ARQUIVOS(
ID_ARQUIVOS INT NOT NULL AUTO_INCREMENT,
LINK VARCHAR (250) NOT NULL,
FK_TCC INT,
CONSTRAINT PK_ARQUIVOS PRIMARY KEY (ID_ARQUIVOS),
CONSTRAINT TCC_FK4 FOREIGN KEY (FK_TCC) REFERENCES TCC (ID_TCC)
);

CREATE TABLE IF NOT EXISTS ERROS(
ID_ERROS INT NOT NULL AUTO_INCREMENT,
NOME VARCHAR (50) NOT NULL,
CATEGORIA VARCHAR (100) NOT NULL,
CONSTRAINT PK_ERROS PRIMARY KEY (ID_ERROS)
);

CREATE TABLE IF NOT EXISTS ERROS_TCC(
FK_TCC INT,
FK_ERROS INT,
CONSTRAINT TCC_FK6 FOREIGN KEY (FK_TCC) REFERENCES TCC (ID_TCC),
CONSTRAINT ERROS_FK1 FOREIGN KEY (FK_ERROS) REFERENCES ERROS (ID_ERROS)
);

CREATE TABLE IF NOT EXISTS SALA_AULA(
ID_SALA_AULA INT NOT NULL AUTO_INCREMENT,
SETOR VARCHAR (50) NOT NULL,
CAPACIDADE VARCHAR (20) NOT NULL,
UNIDADE VARCHAR (50) NOT NULL,
CONSTRAINT PK_SALA_AULA PRIMARY KEY (ID_SALA_AULA)
);

CREATE TABLE IF NOT EXISTS RESERVA(
ID_RESERVA INT NOT NULL AUTO_INCREMENT,
DATA_HORA DATETIME NOT NULL,
FK_PROFESSOR INT,
FK_SALA_AULA INT,
CONSTRAINT PK_RESERVA PRIMARY KEY (ID_RESERVA),
CONSTRAINT PROFESSOR_FK4 FOREIGN KEY (FK_PROFESSOR) REFERENCES PROFESSOR (ID_PROFESSOR),
CONSTRAINT SALA_AULA_FK FOREIGN KEY (FK_SALA_AULA) REFERENCES SALA_AULA (ID_SALA_AULA)
);

CREATE TABLE IF NOT EXISTS DEFESA(
ID_DEFESA INT NOT NULL AUTO_INCREMENT,
POSTURA_PESSOAL VARCHAR (250) NOT NULL,
FLUENCIA_COMUNICATIVA VARCHAR (250) NOT NULL,
CLAREZA VARCHAR (250) NOT NULL,
DOMINIO VARCHAR (250) NOT NULL,
NOTA_FINAL CHAR (4) NOT NULL,
POSTURA_COMENTARIO VARCHAR (250) NOT NULL,
FLUENCIA_COMENTARIO VARCHAR (250) NOT NULL,
CLAREZA_COMENTARIO VARCHAR (250) NOT NULL,
DOMINIO_COMENTARIO VARCHAR (250) NOT NULL,
DATA_BANCA DATE NOT NULL,
FK_TCC INT,
FK_RESERVA INT,
CONSTRAINT PK_DEFESA PRIMARY KEY (ID_DEFESA),
CONSTRAINT TCC_FK5 FOREIGN KEY (FK_TCC) REFERENCES TCC (ID_TCC),
CONSTRAINT RESERVA_FK FOREIGN KEY (FK_RESERVA) REFERENCES RESERVA (ID_RESERVA)
);